{% if jekyll.environment == "local" %}
  {% assign client_id = "my-data.space" %}
  {% assign api_url = "http://localhost:8080" %}
  {% assign api_websocket_url = "http://localhost:8080" %}
{% else %}
  {% assign client_id = site.client_id %}
  {% assign api_url = site.api_url %}
  {% assign api_websocket_url = site.api_websocket_url %}
{% endif %}
{% if page.language == site.default_language %}
  {% assign baseurl = "" %}
{% else %}
  {% assign baseurl = page.language | prepend:"/" %}
{% endif %}
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>{% if page.title %}{{ page.title | escape }}{% else %}{{ site.title | escape }}{% endif %}</title>
    <meta name="description" content="{{ site.data[page.language].slogan }}">
    <link rel="stylesheet" href="/vendor/webix/webix.css" type="text/css">
    <link rel="stylesheet" href="/vendor/fontawesome/css/font-awesome.css" type="text/css">
    <link rel="stylesheet" href="/css/main.css" type="text/css">
    <link rel="stylesheet" href="/css/webix.css" type="text/css">
    <meta name="theme-color" content="black" />
    <meta property="og:url"                content="http://my-data.space" />
    <meta property="og:type"               content="article" />
    <meta property="og:title"              content="{{ site.title }}" />
    <meta property="og:description"        content="{{ site.data[page.language].slogan }}" />
    <meta property="og:image"              content="http://my-data.space/images/logo_social.jpg" />
    <link href="https://fonts.googleapis.com/css?family=Lalezar|Candal|Audiowide" rel="stylesheet">
    <script src="/js/strings.js" type="text/javascript"></script>
    <script>
      LANGUAGE = localStorage.getItem('language') || 'EN';
      STRINGS = STRINGS_ON_DIFFERENT_LANGUAGES[LANGUAGE];
    </script>
  </head>
  <body>

    <div id="bootstrap">
      <script type="text/javascript">
        if (localStorage.getItem('authToken') != null) {
          document.getElementById('bootstrap').style.display = 'none';
        }
      </script>
      {% include header.html %}
      <div class="mission">
        <div class="container">{{ site.data[page.language].mission }}</div>
      </div>
      {% include feature_sections.html %}
      {% include sub_footer.html %}
      {% include footer.html %}
    </div>

    <div id="webix">
      <script type="text/javascript">
        if (localStorage.getItem('authToken') == null) {
          document.getElementById('webix').style.display = 'none';
        }
      </script>
      <div class="webix_preloaded_header"></div>
      <div id="admin_panel__loading"><i class="fa fa-cog fa-spin fa-5x fa-fw"></i></div>
      <div class="logo" onclick="UI.pages.setCurrentPage('data');">
        <div class="logo__shading"></div>
        <img src="/images/logo-128.png" class="logo__img" />
        <div class="logo__img_text">My Data Space</div>
      </div>
      <div id="no_items" class="no_items"></div>
      <div id="admin_panel" class="admin_panel"></div>
      <script type="text/javascript">
        setTimeout(function() {
          $('#admin_panel__loading').remove();
        }, 1500);
      </script>
    </div>

    <script src="/vendor/jquery.js"></script>
    <script src="/vendor/bootstrap/bootstrap.min.js"></script>
    <script src="/vendor/webix/webix_debug.js"></script>
    <script src="/js/ace.js"></script>
    <script src="/js/api/v1.5.js" type="text/javascript"></script>
    <!--
    <script src="/vendor/socket.io.js"></script>
    <script src="/js/common.js" type="text/javascript"></script>
    <script src="/js/api/Entities.js" type="text/javascript"></script>
    <script src="/js/api/Myda.js" type="text/javascript"></script>
    -->
    <script src="/js/uihelper.js" type="text/javascript"></script>
    <script src="/js/uicontrols.js" type="text/javascript"></script>
    <script src="/js/EntityForm.js" type="text/javascript"></script>
    <script src="/js/EntityList.js" type="text/javascript"></script>
    <script src="/js/EntityTree.js" type="text/javascript"></script>
    <script src="/js/Pages.js" type="text/javascript"></script>
    <script src="/js/ui.js" type="text/javascript"></script>
    <script>
      webix.codebase = "/vendor/";
      Mydataspace = new Myda({
        apiURL: '{{ api_url }}',
        websocketURL: '{{ api_websocket_url }}',
        clientId: '{{ client_id }}',
        permission: 'admin',
        connected: function() {
          UI.initConnection();
          UI.refresh();
        }
      });
      Mydataspace.authProviders.facebook.title = STRINGS.CONNECT_TO_FACEBOOK;
      Mydataspace.authProviders.google.title = STRINGS.CONNECT_TO_GOOGLE;
      UI.render('admin_panel');
      Mydataspace.connect();
    </script>
  </body>
</html>
