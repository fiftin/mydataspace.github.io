<!DOCTYPE html>
<html style="height: 100%">

  {% include head.html %}

  <body style="height: 100%">

    <div class="page_top">
      <div class="smoke">
        {% include nav.html %}
      </div>
    </div>

    <script src="/js/dist/api.js" type="text/javascript"></script>
    <script>
      Mydataspace = new Myda({
        apiURL: '{{ api_url }}',
        websocketURL: '{{ api_websocket_url }}',
        clientId: '{{ client_id }}',
        permission: 'admin',
        connected: function() {
          Mydataspace.on('users.getMyProfile.res', function(data) {
            document.getElementById('profile_button').style.backgroundImage = 'url(' + data.avatar + ')';
            $('#signin_modal').modal('hide');
          });
        }
      });
      Mydataspace.connect();
      Mydataspace.on('login', function() {
        document.getElementById('login_button_menu_item').style.display = 'none';
        document.getElementById('profile_button_menu_item').style.display = 'block';
        Mydataspace.emit('users.getMyProfile', {});
      });
      Mydataspace.on('logout', function() {
        document.getElementById('login_button_menu_item').style.display = 'block';
        document.getElementById('profile_button_menu_item').style.display = 'none';
      });
    </script>

    <main class="default_main">
      {{ content }}
    </main>

    {% include footer.html %}

    {% include signin_modal.html %}

    <script src="/vendor/jquery.min.js"></script>
    <script src="/vendor/bootstrap/bootstrap.min.js"></script>



  </body>
</html>
