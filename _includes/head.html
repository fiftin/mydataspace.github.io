{% if page.language == site.default_language %}
  {% assign baseurl = "" %}
  {% assign baseurl_with_trailing_slash = baseurl | append:"/" %}
{% else %}
  {% assign baseurl = page.language | prepend:"/" %}
  {% assign baseurl_with_trailing_slash = baseurl | append:"/" %}
{% endif %}
{% if jekyll.environment == "local" %}
  {% assign client_id = "my-data.space" %}
  {% assign api_url = site.local_api_url %}
  {% assign api_websocket_url = site.local_api_websocket_url %}
{% else %}
  {% assign client_id = site.client_id %}
  {% assign api_url = site.api_url %}
  {% assign api_websocket_url = site.api_websocket_url %}
{% endif %}
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>{% if page.title %}{{ page.title | escape }}{% else %}{{ site.title | escape }}{% endif %}</title>
  <meta name="description" content="{{ site.data[page.language].slogan }}">
  <link rel="stylesheet" href="/css/main.css" type="text/css">
  <link rel="stylesheet" href="/vendor/fontawesome/css/font-awesome.css" type="text/css">
  {% if include.webix %}
    <link rel="stylesheet" href="/css/admin-panel.css" type="text/css">
  {% else %}
    <link rel="stylesheet" href="/vendor/tether/tether.css" type="text/css">
  {% endif %}

  <!--<link href="https://fonts.googleapis.com/css?family=Ubuntu|Ubuntu+Condensed" rel="stylesheet">-->
  <link href="https://fonts.googleapis.com/css?family=Ubuntu|Open+Sans|Raleway" rel="stylesheet">

  <script src="/vendor/tether/tether.js"></script>

  <meta name="theme-color" content="black" />
  <meta property="og:url"                content="https://my-data.space" />
  <meta property="og:type"               content="article" />
  <meta property="og:title"              content="{{ site.title }}" />
  <meta property="og:description"        content="{{ site.data[page.language].slogan }}" />
  <meta property="og:image"              content="https://my-data.space/images/logo_social.jpg" />

  <script>
    function parseJWT(token) {
      if (token == null || token === '') {
          throw new Error('JWT can\t be empty');
      }
      var parts = token.split('.');
      var base64Url = parts[1];
      if (base64Url == null) {
          throw new Error('JWT has Illegal format');
      }
      var base64 = base64Url.replace(/\-/g, '+').replace(/_/g, '/');
      // About niceties of window.btoa method.
      // https://developer.mozilla.org/ru/docs/Web/API/WindowBase64/btoa
      var json = decodeURIComponent(escape(window.atob(base64)));
      return JSON.parse(json);
    }

    function isValidJWT(token) {
      try {
        var json = parseJWT(token);
      } catch(e) {
        return false;
      }
      return json.exp * 1000 >= Date.now();
    }
  </script>

</head>
