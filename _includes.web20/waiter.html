{% assign spinner_id = include.id | append:"__spinner" %}

{% include spinner.html id=spinner_id %}

<script>
  (function() {
    // Run spinner
    var tether = new Tether({
      element: document.getElementById('{{ spinner_id }}'),
      target: document.getElementById('{{ include.id }}'),
      attachment: 'middle center',
      targetAttachment: 'middle center'
    });

    // Wait loading and destroy spinner & tether
    document.getElementById('{{ include.id }}').onload = function() {
      tether.destroy();
      var spinner = document.getElementById('{{ spinner_id }}');
      spinner.parentNode.removeChild(spinner);
    };
  })();
</script>
