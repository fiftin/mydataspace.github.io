UIHelper = {
  SCREEN_XS: 700,
  /**
   * Number of entities received by single request.
   */
  NUMBER_OF_ENTITIES_LOADED_AT_TIME: 20,
  /**
   * Width of label of field in form.
   */
  LABEL_WIDTH: 120,
  APP_LABEL_WIDTH: 160,
  NUMBER_OF_FIXED_INPUTS_IN_FIELDS_FORM: 7,

  ENTITY_TREE_SHOW_MORE_ID: 'show_more_23478_3832ee',
  ENTITY_TREE_DUMMY_ID: 'dummy_483__4734_47e4',
  ENTITY_LIST_SHOW_MORE_ID: 'show_more_47384_3338222',

  COUNTRIES: {
    af: "afghanistan",
    al: "albania",
    dz: "algeria",
    as: "american-samoa",
    ad: "andorra",
    ao: "angola",
    ai: "anguilla",
    aq: "antarctica",
    ag: "antigua-and-barbuda",
    ar: "argentina",
    am: "armenia",
    aw: "aruba",
    au: "australia",
    at: "austria",
    az: "azerbaijan",
    bs: "bahamas",
    bh: "bahrain",
    bd: "bangladesh",
    bb: "barbados",
    by: "belarus",
    be: "belgium",
    bz: "belize",
    bj: "benin",
    bm: "bermuda",
    bt: "bhutan",
    bo: "bolivia",
    ba: "bosnia-and-herzegovina",
    bw: "botswana",
    br: "brazil",
    io: "british-indian-ocean-territory",
    vg: "british-virgin-islands",
    bn: "brunei",
    bg: "bulgaria",
    bf: "burkina-faso",
    bi: "burundi",
    kh: "cambodia",
    cm: "cameroon",
    ca: "canada",
    cv: "cape-verde",
    ky: "cayman-islands",
    cf: "central-african-republic",
    td: "chad",
    cl: "chile",
    cn: "china",
    cx: "christmas-island",
    cc: "cocos-islands",
    co: "colombia",
    km: "comoros",
    ck: "cook-islands",
    cr: "costa-rica",
    hr: "croatia",
    cu: "cuba",
    cw: "curacao",
    cy: "cyprus",
    cz: "czech-republic",
    cd: "democratic-republic-of-congo",
    dk: "denmark",
    dj: "djibouti",
    dm: "dominica",
    do: "dominican-republic",
    tl: "east-timor",
    ec: "ecuador",
    eg: "egypt",
    sv: "el-salvador",
    gq: "equatorial-guinea",
    er: "eritrea",
    ee: "estonia",
    et: "ethiopia",
    fk: "falkland-islands",
    fo: "faroe-islands",
    fj: "fiji",
    fi: "finland",
    fr: "france",
    pf: "french-polynesia",
    ga: "gabon",
    gm: "gambia",
    ge: "georgia",
    de: "germany",
    gh: "ghana",
    gi: "gibraltar",
    gr: "greece",
    gl: "greenland",
    gd: "grenada",
    gu: "guam",
    gt: "guatemala",
    gg: "guernsey",
    gn: "guinea",
    gw: "guinea-bissau",
    gy: "guyana",
    ht: "haiti",
    hn: "honduras",
    hk: "hong-kong",
    hu: "hungary",
    is: "iceland",
    in: "india",
    id: "indonesia",
    ir: "iran",
    iq: "iraq",
    ie: "ireland",
    im: "isle-of-man",
    il: "israel",
    it: "italy",
    ci: "ivory-coast",
    jm: "jamaica",
    jp: "japan",
    je: "jersey",
    jo: "jordan",
    kz: "kazakhstan",
    ke: "kenya",
    ki: "kiribati",
    xk: "kosovo",
    kw: "kuwait",
    kg: "kyrgyzstan",
    la: "laos",
    lv: "latvia",
    lb: "lebanon",
    ls: "lesotho",
    lr: "liberia",
    ly: "libya",
    li: "liechtenstein",
    lt: "lithuania",
    lu: "luxembourg",
    mo: "macau",
    mk: "macedonia",
    mg: "madagascar",
    mw: "malawi",
    my: "malaysia",
    mv: "maldives",
    ml: "mali",
    mt: "malta",
    mh: "marshall-island",
    mr: "mauritania",
    mu: "mauritius",
    yt: "mayotte",
    mx: "mexico",
    fm: "micronesia",
    md: "moldova",
    mc: "monaco",
    mn: "mongolia",
    me: "montenegro",
    ms: "montserrat",
    ma: "morocco",
    mz: "mozambique",
    mm: "myanmar",
    na: "namibia",
    nr: "nauru",
    np: "nepal",
    nl: "netherlands",
    an: "netherlands-antilles",
    nc: "new-caledonia",
    nz: "new-zealand",
    ni: "nicaragua",
    ne: "niger",
    ng: "nigeria",
    nu: "niue",
    kp: "north-korea",
    mp: "northern-mariana-islands",
    no: "norway",
    om: "oman",
    pk: "pakistan",
    pw: "palau",
    ps: "palestine",
    pa: "panama",
    pg: "papua-new-guinea",
    py: "paraguay",
    pe: "peru",
    ph: "philippines",
    pn: "pitcairn",
    pl: "poland",
    pt: "portugal",
    pr: "puerto-rico",
    qa: "qatar",
    cg: "republic-of-the-congo",
    re: "reunion",
    ro: "romania",
    ru: "russia",
    rw: "rwanda",
    bl: "saint-barthelemy",
    sh: "saint-helena",
    kn: "saint-kitts-and-nevis",
    lc: "saint-lucia",
    mf: "saint-martin",
    pm: "saint-pierre-and-miquelon",
    vc: "saint-vincent-and-the-grenadines",
    ws: "samoa",
    sm: "san-marino",
    st: "sao-tome-and-principe",
    sa: "saudi-arabia",
    sn: "senegal",
    rs: "serbia",
    sc: "seychelles",
    sl: "sierra-leone",
    sg: "singapore",
    sx: "sint-maarten",
    sk: "slovakia",
    si: "slovenia",
    sb: "solomon-islands",
    so: "somalia",
    za: "south-africa",
    kr: "south-korea",
    ss: "south-sudan",
    es: "spain",
    lk: "sri-lanka",
    sd: "sudan",
    sr: "suriname",
    sj: "svalbard-and-jan-mayen",
    sz: "swaziland",
    se: "sweden",
    ch: "switzerland",
    sy: "syria",
    tw: "taiwan",
    tj: "tajikistan",
    tz: "tanzania",
    th: "thailand",
    tg: "togo",
    tk: "tokelau",
    to: "tonga",
    tt: "trinidad-and-tobago",
    tn: "tunisia",
    tr: "turkey",
    tm: "turkmenistan",
    tc: "turks-and-caicos",
    tv: "tuvalu",
    vi: "virgin-islands",
    ug: "uganda",
    ua: "ukraine",
    ae: "united-arab-emirates",
    gb: "united-kingdom",
    us: "united-states",
    uy: "uruguay",
    uz: "uzbekistan",
    vu: "vanuatu",
    va: "vatican",
    ve: "venezuela",
    vn: "vietnam",
    wf: "wallis-and-futuna",
    eh: "western-sahara",
    ye: "yemen",
    zm: "zambia",
    zw: "zimbabwe"
  },

  ENTITY_ICONS: {
    'root': 'database',
    'protos': 'cubes',
    'proto': 'cube',
    'tasks': 'code',
    'task': 'file-code-o',
    'logs': 'history',
    'log': 'file-movie-o',
    'resources': 'diamond',
    'resource': 'file-image-o',
    'processes': 'cogs',
    'process': 'cog',
    'likes': 'heart',
    'like': 'heart-o',
    'comments': 'comments',
    'comment': 'comment',
    'views': 'photo',
    'view': 'file-image-o'
  },

  IGNORED_PATHS: [
    'comments',
    // 'views',
    'likes'
    // 'processes'
  ],

  SYSTEM_PATHS: [
    'resources',
    'tasks',
    'protos',
    'comments',
    'views',
    'likes',
    'processes'
  ],

  setVisible: function(components, isVisible) {
    if (!Array.isArray(components)) {
      components = [components];
    }
    for (var i in components) {
      var component = components[i];
      if (typeof component === 'string') {
        component = $$(component);
      }
      if (isVisible) {
        component.show();
      } else {
        component.hide();
      }
    }
  },

  /**
   * User can only view entities. All buttons for manipulations is hidden in
   * this mode.
   */
  isViewOnly: function() {
    return window.location.hash != null &&
           window.location.hash !== '' &&
           window.location.hash !== '#';
  },

  getEntityTypeByPath: function(path) {
    var depth = UIHelper.getEntityDepthByPath(path);
    switch (path) {
      case '':
        return 'root';
      case 'protos':
      case 'resources':
      case 'tasks':
      case 'likes':
      case 'comments':
      case 'processes':
      case 'views':
        return path;
      default:
          if (/^tasks\/[^\/]+$/.test(path)) {
              return 'task';
          }
          if (/^tasks\/[^\/]+\/logs$/.test(path)) {
              return 'logs';
          }
          if (/^tasks\/[^\/]+\/logs\/[^\/]+$/.test(path)) {
              return 'log';
          }
          if (path.startsWith('protos/') && depth === 2) {
            return 'proto';
          }
          if (path.startsWith('likes/') && depth === 2) {
            return 'like';
          }
          if (path.startsWith('comments/') && depth === 2) {
            return 'comment';
          }
          if (path.startsWith('views/') && depth === 2) {
            return 'view';
          }
          if (path.startsWith('resources/')) {
            return 'resource';
          }
    }
    return 'none';
  },

  getIconByPath: function(path, isEmpty, isOpened) {
    var icon = UIHelper.ENTITY_ICONS[UIHelper.getEntityTypeByPath(path)];
    if (icon) {
        return icon;
    }
    if (isEmpty) {
      return 'file-o';
    } else {
      return isOpened ? 'folder-open' : 'folder';
    }
  },

  getEntityDepthByPath: function(path) {
   var depth = 1;
   for (var i = 0; i < path.length; i++) {
     if (path[i] === '/') {
       depth++;
     }
   }
   return depth;
  },

  isProtoPath: function(path) {
    if (path == null) {
      return false;
    }
    return path.startsWith('protos/') &&
           UIHelper.getEntityDepthByPath(path) === 2;
  },

  isProto: function(id) {
    if (id == null) {
      return false;
    }
    var identity = Identity.dataFromId(id);
    return UIHelper.isProtoPath(identity.path);
  },

  popupCenter: function(url, title, w, h) {
    // Fixes dual-screen position                         Most browsers      Firefox
    var dualScreenLeft = window.screenLeft != undefined ? window.screenLeft : screen.left;
    var dualScreenTop = window.screenTop != undefined ? window.screenTop : screen.top;

    var width = window.innerWidth ? window.innerWidth : document.documentElement.clientWidth ? document.documentElement.clientWidth : screen.width;
    var height = window.innerHeight ? window.innerHeight : document.documentElement.clientHeight ? document.documentElement.clientHeight : screen.height;

    var left = ((width / 2) - (w / 2)) + dualScreenLeft;
    var top = ((height / 2) - (h / 2)) + dualScreenTop;
    var newWindow = window.open(url, title, 'scrollbars=yes, width=' + w + ', height=' + h + ', top=' + top + ', left=' + left);

    // Puts focus on the newWindow
    if (window.focus) {
        newWindow.focus();
    }
    return newWindow;
  },

  isValidJWT: function(token) {
    return isValidJWT(token);
  }

};
